<%= form_for(@item) do |f| %>
  <%= f.error_messages %>

  <div class="field">
    <%= f.label :title %><br />
    <%= f.text_area :title, :rows => 3 %>
  </div>
  <div class="field">
    <%= f.label :accession_num %><br />
    <%= f.text_area :accession_num, :rows => 3 %>
  </div>
  <div class="field">
    <%= f.label :credit %><br />
    <%= f.text_area :credit, :rows => 3 %>
  </div>
  <div class="field">
    <%= f.label :description %><br />
    <%= f.text_area :description, :rows => 5 %>
  </div>
  <div class="field">
    <%= f.label :olivia_id %><br />
    <%= f.text_area :olivia_id, :rows => 3 %>
  </div>
  <div class="field">
    <%= f.label :urn %><br />
    <%= f.text_area :urn, :rows => 3 %>
  </div>
  <div class="field">
    <%= f.label :creator_label %><br />
    <%= f.text_field :creator_label, :size => 55 %>
  </div>
  <div class="field">
    <%= f.label :creator_id %><br />
    <%= f.select :creator_id, Person.select_list, {:include_blank => true} %>
  </div>
  <div class="field">
    <%= f.label :owner_id %><br />
    <%= f.select :owner_id, Owner.select_list, {:include_blank => true} %>
  </div>
  <div class="field">
    <%= f.label :collection_id %><br />
    <%= f.select :collection_id, Collection.select_list, {:include_blank => true} %>
  </div>
  <div class="field">
    <%= f.label :pages %><br />
    <%= f.text_field :pages, :size => 5 %>
  </div>
  <div class="field">
    <%= f.label :format_id %><br />
    <%= f.text_field :format_id %>
  </div>
  <div class="field">
    <%= f.label :period_id %><br />
    <%= f.select :period_id, Period.select_list, {:include_blank => true} %>
  </div>
  <div class="field">
    <%= f.label :source_date %> (use with calendar type below)<br />
    <%= f.text_field :source_date %>
  </div>
  <div class="field">
    <%= f.label :calendar_type_id %><br />
    <%= f.select :calendar_type_id, CalendarType.select_list, {:include_blank => true} %>
  </div>
  <div class="field">
    <%= f.label :display_date %><br />
    <%= f.text_field :display_date %>
  </div>
  <div class="field">
    <%= f.label :sort_date %> (YYYY-MM-DD Gregorian)<br />
    <%= f.date_select :sort_date, {:start_year => 1700, :end_year => 1950} %>
  </div>
  <div class="field">
    <%= f.label :circa %><br />
    <%= f.check_box :circa %>
  </div>
  <div class="field">
    <%= f.label :bound %><br />
    <%= f.check_box :bound %>
  </div>
  <div class="field">
    <%= f.label :dimensions %><br />
    <%= f.text_field :dimensions %>
  </div>
  <div class="field">
    <%= f.label :notes %><br />
    <%= f.text_area :notes, :rows => 3 %>
  </div>
  <div class="field">
    <%= f.label :place_id %><br />
    <%= f.select :place_id, Place.select_list, {:include_blank => true } %>
  </div>
  <div class="field">
    <%= f.label :publish %><br />
    <%= f.check_box :publish %>
  </div>
  <hr />
  <p>
    <b>Subjects</b>
  </p>
  <% counter = 1 -%>
  <% @subjects = Subject.all(:include => 'subject_type', :order => 'subject_types.id, subject_translations.name') -%>
  <table class="styled">
    <tr>
      <% @subjects.each do |subject| -%>
        <% unless @current_type == subject.subject_type_id -%>
          <% @current_type = subject.subject_type_id  -%>
          <% if counter > 1 %>
          </tr>
          <% counter = 1 %>
        <% end -%>
        <td colspan="5"><strong><%=  subject.subject_type.name %></strong></td></tr><tr>
    <% end -%>
    <% if counter == 6 -%>
    </tr>
    <tr>
      <% counter = 1 -%>
    <% end -%>
    <td>
      <input type="checkbox"
             id="<%=subject.id%>"
             name="subject_ids[]"
             value="<%=subject.id %>"
             <%  if @item.subjects.include? subject -%>
               checked="checked"
             <% end -%>
             /> <%= subject.name %>
    </td>
    <% counter += 1 -%>
  <% end -%>
</tr>
</table>
<hr />
<div class="actions">
  <%= f.submit %>
</div>
<% end %>
