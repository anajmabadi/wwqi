<link href="/javascripts/shadowbox-3.0.3/shadowbox.css" media="screen" rel="stylesheet" type="text/css" />
<script src="/javascripts/shadowbox-3.0.3/shadowbox.js" type="text/javascript">
</script>
<script src="/javascripts/jquery.qtip-1.0.0-rc3.js" type="text/javascript">
</script>
<script type="text/javascript">
    function openShadowbox(content, player, width, height, title) {
        Shadowbox.open({
            content: content,
            player: player,
            width: width,
            height: height,
            options: { animate: false }
        });
    }
</script>
<script type="text/javascript">
Shadowbox.init();
</script>

<script language="javascript" type="application/javascript">

	<% if @zoomify_show -%>
	$(window).load(function () {
		openShadowbox( '#zoomify-popup', 'inline', 750, 500 );
	});

<% end -%>
</script>
<script type="text/javascript">
    function trim(str)
	{
	  return str.replace(/^\s+|\s+$/g, '');
	}
	
	function setFocusDelayed()
	{
	  global_valfield.focus();
	}
	
	function setfocus(valfield)
	{
	  // save valfield in global variable so value retained when routine exits
	  global_valfield = valfield;
	  setTimeout( 'setFocusDelayed()', 100 );
	}
	
	
	function validateEmail  (valfield)   
		{
	
		  var tfld = trim(valfield.value);  // value of field with whitespace trimmed off
		  var email = /^[^@]+@[^@.]+\.[^@]*\w\w$/  ;
		  if (!email.test(tfld)) {
			$(valfield).parent().find(".mandatory").html("<%= t(:not_valid) %>");
			$(valfield).data("isValid",false);
			setfocus(valfield);
			return false;
		  }
		
		  var email2 = /^[A-Za-z][\w.-]+@\w[\w.-]+\.[\w.-]*[A-Za-z][A-Za-z]$/  ;
		  if (!email2.test(tfld)) {
			$(valfield).parent().find(".mandatory").html("<%= t(:not_valid) %>");
			$(valfield).data("isValid",false);
			}
		  else{
			$(valfield).parent().find(".mandatory").html("*");
			$(valfield).data("isValid",true);
			}
			if ($("#sb-container input#from").data("isValid")!=null && $("#sb-container input#from").data("isValid") ==true && $("#sb-container  input#to").data("isValid")!=null && $("#sb-container  input#to").data("isValid")==true){
				$("#sb-container input[type=submit]").attr("disabled",false);
			}
			else{
				$("#sb-container input[type=submit]").attr("disabled",true);
			}
		  return true;
		}

</script>